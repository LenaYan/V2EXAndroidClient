// Top-level build file where you can add configuration options common to all sub-projects/modules.

apply plugin: "com.jfrog.artifactory"

buildscript {
    repositories {
        jcenter()
        mavenCentral()
        maven {
            url 'https://github.com/uPhyca/stetho-realm/raw/master/maven-repo'
        }
        maven {
            url "https://plugins.gradle.org/m2/"
        }
        maven {
            url "http://106.75.77.246:8081/artifactory/libs-release-local"
            credentials {
                username = artifactory_reader
                password = artifactory_reader_password
            }
        }
        maven {
            url "http://106.75.77.246:8081/artifactory/libs-snapshot-local"
            credentials {
                username = artifactory_reader
                password = artifactory_reader_password
            }
        }
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.2.0'
//        classpath 'com.frogermcs.androiddevmetrics:androiddevmetriÔºècs-plugin:0.3.1'
        classpath 'me.tatarka:gradle-retrolambda:3.3.1'
        classpath 'me.tatarka.retrolambda.projectlombok:lombok.ast:0.2.3.a2'
        classpath 'io.realm:realm-gradle-plugin:2.2.0'
        classpath 'com.jakewharton.hugo:hugo-plugin:1.2.1'
        classpath 'org.jfrog.buildinfo:build-info-extractor-gradle:4.4.7'
    }
    configurations.classpath.exclude group: 'com.android.tools.external.lombok'
}

allprojects {
    repositories {
        jcenter()
        mavenCentral()
        maven {
            url 'https://github.com/uPhyca/stetho-realm/raw/master/maven-repo'
        }
        maven {
            url "https://plugins.gradle.org/m2/"
        }
        maven {
            url "http://106.75.77.246:8081/artifactory/libs-release-local"
            credentials {
                username = artifactory_reader
                password = artifactory_reader_password
            }
        }
        maven {
            url "http://106.75.77.246:8081/artifactory/libs-snapshot-local"
            credentials {
                username = artifactory_reader
                password = artifactory_reader_password
            }
        }
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

ext {
    versionName = '1.0.0'
    versionCode = 1
    applicationId = 'com.rayman.v2ex'
    minSdkVersion = 15
    libDefaultPublish = 'debug'//debug or release
    compileSdkVersion = 25
    targetSdkVersion = 25
    buildToolsVersion = '25.0.0'
    gradleBuildToolsVersion = '2.2.0'
    junitVersion = '4.12'
    sourceCompatibilityVersion = JavaVersion.VERSION_1_8
    targetCompatibilityVersion = JavaVersion.VERSION_1_8
    retrolambdaJavaVersion = JavaVersion.VERSION_1_7

    androidSupportPkg = 'com.android.support'
    androidSupportVersion = '25.0.0'
    squareUpPkg = 'com.squareup'
    okHttpPkg = 'com.squareup.okhttp3'
    okHttpVersion = '3.3.1'
    retrofitPkg = 'com.squareup.retrofit2'
    retrofitVersion = '2.0.0-beta3'
    testSupportPkg = "com.android.support.test"
    testSupportVersion = '0.5'
    dexMakerPkg = 'com.google.dexmaker'
    dexMakerVersion = '1.2'
    testEspressoPkg = 'com.android.support.test.espresso'
    testEspressoVersion = '2.2.2'
    lintPkg = 'com.android.tools.lint'
    lintVersion = '24.3.1'
    rxBindingPkg = 'com.jakewharton.rxbinding'
    rxBindingVersion = '0.4.0'
    mockitoPkg = 'org.mockito'
    mockitoVersion = '1.10.19'
    daggerPkg = 'com.google.dagger'
    daggerVersion = '2.7'
}

ext.depMap = [
        RecyclerView          : "${androidSupportPkg}:recyclerview-v7:${androidSupportVersion}",
        Palette               : "${androidSupportPkg}:palette-v7:${androidSupportVersion}",
        CardView              : "${androidSupportPkg}:cardview-v7:${androidSupportVersion}",
        Design                : "${androidSupportPkg}:design:${androidSupportVersion}",
        Percent               : "${androidSupportPkg}:percent:${androidSupportVersion}",
        Annotations           : "${androidSupportPkg}:support-annotations:${androidSupportVersion}",
        AppCompat             : "${androidSupportPkg}:appcompat-v7:${androidSupportVersion}",
        SupportV4             : "${androidSupportPkg}:support-v4:${androidSupportVersion}",
        SupportCompat         : "${androidSupportPkg}:support-compat:${androidSupportVersion}",
        SupportCoreUtils      : "${androidSupportPkg}:support-core-utils:${androidSupportVersion}",
        SupportCoreUI         : "${androidSupportPkg}:support-core-ui:${androidSupportVersion}",
        SupportMediaCompat    : "${androidSupportPkg}:support-media-compat:${androidSupportVersion}",
        SupportFragment       : "${androidSupportPkg}:support-fragment:${androidSupportVersion}",
        Multidex              : "${androidSupportPkg}:multidex:1.0.1",
        ConstraintLayout      : "${androidSupportPkg}:constraint-layout:1.0.0-alpha1",
        FlexBox               : 'com.google.android:flexbox:0.2.3',

        Stetho                : 'com.facebook.stetho:stetho:1.4.1',
        StethoOkhttp3         : 'com.facebook.stetho:stetho-okhttp3:1.4.1',
        StethoRealm           : 'com.uphyca:stetho_realm:2.0.0',

        Guava                 : 'com.google.guava:guava:19.0',

        AutoValue             : 'com.google.auto.value:auto-value:1.1',
        AutoParcel            : 'com.github.frankiesardo:auto-parcel:0.3.1',
        AutoParcelProcessor   : 'com.github.frankiesardo:auto-parcel-processor:0.3.1',

        FastJson              : 'com.alibaba:fastjson:1.1.45.android',
        DSLJson               : 'com.dslplatform:dsl-json:0.9.5',
        DSLJsonProcessor      : 'com.dslplatform:dsl-json-processor:0.4',

        OkHttp                : "${okHttpPkg}:okhttp:${okHttpVersion}",
        LoggingInterceptor    : "${okHttpPkg}:logging-interceptor:${okHttpVersion}",
        OkHttpWS              : "${okHttpPkg}:okhttp-ws:${okHttpVersion}",

        Retrofit              : "${retrofitPkg}:retrofit:${retrofitVersion}",
        RxJavaAdapter         : "${retrofitPkg}:adapter-rxjava:${retrofitVersion}",
        Java8Adapter          : "${retrofitPkg}:adapter-java8:${retrofitVersion}",
        GuavaAdapter          : "${retrofitPkg}:adapter-guava:${retrofitVersion}",
        GsonConverter         : "${retrofitPkg}:converter-gson:${retrofitVersion}",
        JacksonConverter      : "${retrofitPkg}:converter-jackson:${retrofitVersion}",
        MoshiConverter        : "${retrofitPkg}:converter-moshi:${retrofitVersion}",
        ProtobufConverter     : "${retrofitPkg}:converter-protobuf:${retrofitVersion}",
        WireConverter         : "${retrofitPkg}:converter-wire:${retrofitVersion}",
        SimpleXMLConverter    : "${retrofitPkg}:converter-simplexml:${retrofitVersion}",
        ScalarsConverter      : "${retrofitPkg}:converter-scalars:${retrofitVersion}",

        RxAndroid             : 'io.reactivex:rxandroid:1.0.1',
        RxBinding             : "${rxBindingPkg}:rxbinding:${rxBindingVersion}",
        RxBindingSupportV4    : "${rxBindingPkg}:rxbinding-support-v4:${rxBindingVersion}",
        RxBindingAppcompat    : "${rxBindingPkg}:rxbinding-appcompat-v7:${rxBindingVersion}",
        RxBindingDesign       : "${rxBindingPkg}:rxbinding-design:${rxBindingVersion}",
        RxBindingRecyclerView : "${rxBindingPkg}:rxbinding-recyclerview-v7:${rxBindingVersion}",
        RxLeanBack            : "${rxBindingPkg}:rxbinding-leanback-v17:${rxBindingVersion}",

        Moshi                 : 'com.squareup.moshi:moshi:1.2.0',

        Dagger                : "${daggerPkg}:dagger:${daggerVersion}",
        DaggerCompile         : "${daggerPkg}:dagger-compiler:${daggerVersion}",

        RetroLambdaConfig     : 'net.orfjackal.retrolambda:retrolambda:2.1.0',
        Timber                : 'com.jakewharton.timber:timber:4.1.1',
        AnnotationJsr250      : 'javax.annotation:jsr250-api:1.0',
        MaterialMenuToolbar   : 'com.balysv.materialmenu:material-menu-toolbar:1.5.0',
        FlowLayout            : 'com.wefika:flowlayout:0.4.1',
        androidCrop           : 'com.soundcloud.android:android-crop:1.0.1@aar',

        RoundedImageview      : 'com.makeramen:roundedimageview:2.2.1',
        ScaleImageView        : "com.davemorrissey.labs:subsampling-scale-image-view:3.5.0",

        Otto                  : "${squareUpPkg}:otto:1.3.8",
        LeakCanary            : "${squareUpPkg}.leakcanary:leakcanary-android:1.3.1",
        LeakCanaryAndroidNoOp : "${squareUpPkg}.leakcanary:leakcanary-android-no-op:1.3.1",
        FestAndroid           : "${squareUpPkg}:fest-android:1.0.7",

        Picasso               : "${squareUpPkg}.picasso:picasso:2.5.2",
        Glide                 : "com.github.bumptech.glide:glide:3.7.0",
        GlideOkhttpIntegration: 'com.github.bumptech.glide:okhttp3-integration:1.4.0@aar',

        RxPermissions         : 'com.tbruyelle.rxpermissions:rxpermissions:0.7.0@aar',

        Hamcrest              : 'org.hamcrest:hamcrest-all:1.3',
        JUnit                 : "junit:junit:${junitVersion}",

        MockitoAll            : "${mockitoPkg}:mockito-all:${mockitoVersion}",
        MockitoCore           : "${mockitoPkg}:mockito-core:${mockitoVersion}",
        FestAssert            : 'org.easytesting:fest-assert-core:2.0M10',
        Robolectric           : 'org.robolectric:robolectric:3.0',

        UIAutomator           : 'com.android.support.test.uiautomator:uiautomator-v18:2.1.2',

        //Espresso
        EspressoCore          : "${testEspressoPkg}:espresso-core:${testEspressoVersion}",
        EspressoContrib       : "${testEspressoPkg}:espresso-contrib:${testEspressoVersion}",
        EspressoIntents       : "${testEspressoPkg}:espresso-intents:${testEspressoVersion}",
        EspressoIDLing        : "${testEspressoPkg}:espresso-idling-resource:${testEspressoVersion}",

        //Test support
        RunnerSupport         : "${testSupportPkg}:runner:${testSupportVersion}",
        RulesSupport          : "${testSupportPkg}:rules:${testSupportVersion}",

        //Dex maker
        DexMaker              : "${dexMakerPkg}:dexmaker:${dexMakerVersion}",
        DexMakerMockito       : "${dexMakerPkg}:dexmaker-mockito:${dexMakerVersion}",

        //Lint dependencies
        Lintapi               : "${lintPkg}:lint-api:${lintVersion}",
        Lintchecks            : "${lintPkg}:lint-checks:${lintVersion}"
]